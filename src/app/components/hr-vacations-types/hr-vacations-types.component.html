<div class="profile-wrapper" style="font-size: 14px;">
  <div class="col-md-12">
  <div class="row" style="height: 180px !important; overflow: scroll;">
    <div class="col-sm-12 col-md-4 mt-2">

      <div class="card">
        <div class="card-body chart-body">
          <chart2></chart2>
          <div class="mt-3 chart-content" style="margin-left: 120px;">
            <span style="color: #bfbcbc;"> {{ 'HrDocumentRequest.AnnualleavesFor' | translate }} {{currentYear}}   </span>
            <br>
            <span><i class="fa fa-square" style="color: red;"></i>
              <span style="color: #333687;font-size:0.75rem"><b> {{annualLeaveDays}} {{ 'Profile.Booked' | translate }}  </b></span>
            </span>
            <br>
            <span><i class="fa fa-square" style="color:rgba(151,199,75,255);"></i>
              <span style="color: #333687;font-size:0.75rem"><b> {{annualLeaveBalance}} {{ 'Profile.DaysRemaining' | translate }}   </b></span>
            </span> 
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-12 col-md-4 mt-2">
      <div class="card">
        <div class="card-body chart-body">
          <chart4></chart4>
          <div class="mt-4 chart-content" style="margin-left: 120px;">
            <span style="color: #bfbcbc;">{{ 'Profile.Sickleaves' | translate }}    </span>
            <h5 style="color: #333687"><b>{{sickLeaveDays}} {{ 'Profile.Sickleaves' | translate }}</b></h5>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-12 col-md-4 mt-2">
      <div class="card">
        <div class="card-body chart-body">
          <chart5></chart5>
          <div class="mt-4 chart-content" style="margin-left: 120px;">
            <span style="color: #bfbcbc;"> {{ 'Profile.OtherLeave' | translate }}    </span>
            <h5 style="color: #333687"><b>{{otherLeaveDays}} {{ 'Profile.OtherLeave' | translate }}</b></h5>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
 
   <div class="col-md-12 col-sm-12 d-flex justify-content-between align-items-center">
    <h5 class="card-title mt-2">{{ 'Profile.HrPersonVacations' | translate }}</h5>
    <fa-icon class="ico text-primary fa-2x" [icon]="addIcon" (click)="addPerson()"></fa-icon>
  </div>

  <!-- Loading Overlay -->
  <app-insideloader *ngIf="loadingOverlay"></app-insideloader>
  <!-- =============== -->
  <div class="form" *ngIf="vacationData && !loadingOverlay">
    <div class="card">
      <div class="card-body">
        <div class="table-responsive mt-3">

          <!-- DataTable Code-->
          <div class="example-header">
            <!-- <div class="search-box d-flex" mat-button  aria-label="Search">
              <mat-icon class="filter-test">search</mat-icon>
              <input matInput class="filter-input" (keyup)="applyFilter($event.target.value)" placeholder="Filter">
            </div> -->
            <div class="form-group mb-4 mt-3">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text table-card-filter-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <g clip-path="url(#clip0_33_1016)">
                        <path
                          d="M17.7801 16.7203L13.3033 12.2435C14.5233 10.7515 15.1231 8.84758 14.9787 6.92568C14.8343 5.00378 13.9567 3.21091 12.5275 1.9179C11.0983 0.624891 9.22678 -0.069323 7.30007 -0.0211491C5.37336 0.0270248 3.53886 0.8139 2.17605 2.17672C0.813229 3.53954 0.0263534 5.37403 -0.0218205 7.30074C-0.0699943 9.22745 0.624219 11.099 1.91723 12.5282C3.21023 13.9574 5.00311 14.835 6.92501 14.9794C8.84691 15.1238 10.7508 14.524 12.2428 13.304L16.7196 17.7808C16.861 17.9174 17.0505 17.993 17.2471 17.9913C17.4438 17.9896 17.6319 17.9107 17.771 17.7716C17.91 17.6326 17.9889 17.4445 17.9906 17.2478C17.9923 17.0512 17.9167 16.8617 17.7801 16.7203ZM7.49984 13.5005C6.31315 13.5005 5.15311 13.1486 4.16642 12.4893C3.17972 11.83 2.41068 10.893 1.95656 9.79661C1.50243 8.70025 1.38361 7.49385 1.61512 6.32997C1.84664 5.16608 2.41808 4.09698 3.2572 3.25787C4.09631 2.41875 5.16541 1.84731 6.32929 1.6158C7.49318 1.38428 8.69958 1.5031 9.79594 1.95723C10.8923 2.41136 11.8294 3.18039 12.4887 4.16709C13.1479 5.15378 13.4998 6.31382 13.4998 7.50051C13.4981 9.09126 12.8653 10.6163 11.7405 11.7412C10.6157 12.866 9.09059 13.4987 7.49984 13.5005Z"
                          fill="#374957" />
                      </g>
                      <defs>
                        <clipPath id="clip0_33_1016">
                          <rect width="18" height="18" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Filter" (keyup)="applyFilter($event.target.value)">
              </div>
            </div>
        </div>
          <div class="example-container mat-elevation-z8 d-md-block d-none">

            <mat-table  class="responsive-md responsive-sm zebra sticky-header" [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">

              <ng-container matColumnDef="operationDate">
                <mat-header-cell *matHeaderCellDef mat-sort-header > {{'Profile.OperationDate' | translate }}
                </mat-header-cell >
                <mat-cell *matCellDef="let row" > {{row.operationDate}} </mat-cell>
              </ng-container>


              <ng-container matColumnDef="fullName">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{'Profile.HrPersonId' | translate }}
                </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.hrPersons.fullName}} </mat-cell>
              </ng-container>


              <ng-container matColumnDef="noOfDays">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{'Profile.NoOfDays' | translate }}</mat-header-cell>
                <mat-cell *matCellDef="let row" class="NoOfDays"> {{row.noOfDays}} </mat-cell>
              </ng-container>

              <ng-container matColumnDef="hrVacationsTypes.vacationsTypeName">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Profile.TypeOfLeave' | translate }}</mat-header-cell>
                <mat-cell *matCellDef="let row">{{ ('Profile.' + row.hrVacationsTypes.vacationsTypeName) | translate }}</mat-cell>
            </ng-container>
            
              

              <ng-container matColumnDef="fndPortalStatusLkp">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{'Profile.StatusLkpId' | translate  }}</mat-header-cell>
                <mat-cell *matCellDef="let row"> 
                  
                 <span *ngIf="row.portalStatusLkpId == 41699" style="color: green; ">{{row.fndPortalStatusLkp}}</span>
                  <span *ngIf="row.portalStatusLkpId == 41700" style="color: red; ">{{row.fndPortalStatusLkp}}</span>
                  <span *ngIf="row.portalStatusLkpId == 41723" style="color:green; ">{{row.fndPortalStatusLkp}}</span>
                  <span *ngIf="row.portalStatusLkpId == 41698" style="color: rgb(197, 197, 27); ">{{row.fndPortalStatusLkp}}</span>
                  <span *ngIf="row.portalStatusLkpId == 41712" style="color: orange; ">{{row.fndPortalStatusLkp}}</span>
                  </mat-cell> 
              </ng-container>

              <ng-container matColumnDef="Actions">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{'Profile.Action' | translate }}</mat-header-cell>
                <mat-cell *matCellDef="let row">

                  <div style="text-align: center;">
                    <fa-icon *ngIf="row.portalStatusLkpId!=41698" class="fa fa-eye ico text-info ml-2"
                      (click)="viewLeaveRequest(row)"></fa-icon>
                    <fa-icon *ngIf="row.portalStatusLkpId==41698" class="ico text-info ml-2" [icon]="editIcon"
                      (click)="editPerson(row)"></fa-icon>
                    <fa-icon *ngIf="row.portalStatusLkpId==41698" class="ico text-danger ml-2" [icon]="deleteIcon"
                      (click)="deletePerson(row.id)"></fa-icon>
                    <fa-icon *ngIf="row.portalStatusLkpId!=41698" class="fa fa-print ml-2"  
                    (click)="printVacationReportDocument(row.id, row.hrVacationsTypeId)"></fa-icon>
                    <fa-icon *ngIf="row.portalStatusLkpId==41698" class="fa fa-check-circle ml-2 text-success"
                      (click)="submitLeaveRequest(row.id)"></fa-icon>
                  </div>


                </mat-cell>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;">
              </mat-row>
            </mat-table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" ></mat-paginator>
       </div>

        </div>
      </div>
    </div>
  </div>

  <div class="d-md-none d-block container-fluid">
    <div  [ngClass]="{ 'table-card-even': i % 2 === 0, 'table-card-odd': i % 2 !== 0 }"
    *ngFor="let item of dataSource?.filteredData; let i = index">

    <div class="table-card-item">
      <p>{{'Profile.OperationDate' | translate }} </p>
      <p>  {{item?.operationDate}} </p>
    </div>

    <div class="table-card-item">
      <p> {{'Profile.HrPersonId' | translate }} </p>
      <p> {{item?.hrPersons.fullName}} </p>
    </div>

    <div class="table-card-item">
      <p> {{'Profile.NoOfDays' | translate }} </p>
      <p>{{item?.noOfDays}} </p>
    </div>

    <div class="table-card-item">
      <p> {{ 'Profile.TypeOfLeave' | translate }} </p>
      <p> {{ ('Profile.' + item?.hrVacationsTypes.vacationsTypeName) | translate }} </p>
    </div>

    <div class="table-card-item">
      <p> {{'Profile.StatusLkpId' | translate  }}  </p>
      <p> 
        <span *ngIf="item?.portalStatusLkpId == 41699" style="color: green; ">{{item?.fndPortalStatusLkp}}</span>
                  <span *ngIf="item?.portalStatusLkpId == 41700" style="color: red; ">{{item?.fndPortalStatusLkp}}</span>
                  <span *ngIf="item?.portalStatusLkpId == 41723" style="color:green; ">{{item?.fndPortalStatusLkp}}</span>
                  <span *ngIf="item?.portalStatusLkpId == 41698" style="color: rgb(197, 197, 27); ">{{item?.fndPortalStatusLkp}}</span>
                  <span *ngIf="item?.portalStatusLkpId == 41712" style="color: orange; ">{{item?.fndPortalStatusLkp}}</span>
      </p>
    </div>
    <div class="table-card-item">
      <p> {{'Profile.Action' | translate }} </p>
      <p> 
        <fa-icon *ngIf="item?.portalStatusLkpId!=41698" class="fa fa-eye ico text-info ml-2"
        (click)="viewLeaveRequest(item)"></fa-icon>
      <fa-icon *ngIf="item?.portalStatusLkpId==41698" class="ico text-info ml-2" [icon]="editIcon"
        (click)="editPerson(item)"></fa-icon>
      <fa-icon *ngIf="item?.portalStatusLkpId==41698" class="ico text-danger ml-2" [icon]="deleteIcon"
        (click)="deletePerson(item.id)"></fa-icon>
      <fa-icon *ngIf="item?.portalStatusLkpId!=41698" class="fa fa-print ml-2"  
      (click)="printVacationReportDocument(item.id, item.hrVacationsTypeId)"></fa-icon>
      <fa-icon *ngIf="item?.portalStatusLkpId==41698" class="fa fa-check-circle ml-2 text-success"
        (click)="submitLeaveRequest(item.id)"></fa-icon>

      </p>
    </div>


    </div>
  </div>